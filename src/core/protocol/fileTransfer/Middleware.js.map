{"version":3,"file":"Middleware.js","sourceRoot":"","sources":["Middleware.ts"],"names":["Middleware","Middleware.constructor","Middleware.getOutgoingList","Middleware.getIncomingList","Middleware.addIncomingSocket","Middleware.closeSocketByIdentifier","Middleware.feedNode2","Middleware._constructOutgoingKey","Middleware.feedNode","Middleware._feedSocket","Middleware._retrieveConnectionToNodeAndReduceBatch","Middleware._connectToNodeAndReduceBatch","Middleware._requestFeeding","Middleware._obtainConnectionAndFeed","Middleware._setupListeners"],"mappings":"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"}